
properties([parameters([
	choice(choices: ['windows', 'linux'], name: 'System'), 
	choice(choices: ['chrome','firefox'], name: 'Browser'), 
	choice(choices: ['qe','dev'], name: 'Environment'), 
	choice(choices: ['main','dev'], name: 'Branch')
])])

pipeline {
    agent any
    
    environment {
        maven = 'default'
    }
    
    stages {
        
        stage('Initialize') {
            steps {
                echo '# starting the pipeline execution...'
            }
        }
        
        stage('Clone release') {
            steps {
                echo '# cloning the application...'
                git credentialsId: 'git-th3-ssh', url: 'https://github.com/th33ngi/java-git-pipeline-simplescript.git', branch: "${parameters.Branch}"
            }
        }
        
        stage('Build release') {
            steps {
                echo '# building the application...'
                //bat "mvn -B -DskipTests clean install"
            }
        }
        
        stage('Run test plan') { 
            steps {
                echo '# teting the application...'
                //bat 'mvn compile test' 
            }
        }
    }
    
    post {
        always {
            cleanWs()
        }
    }
}